{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="{% static 'pwa/manifest.json' %}?v=8">

    <meta name="theme-color" content="#02fcfc">


    {% block linksCss %}{% endblock %}
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="shortcut icon" href="{% static 'pwa/img/logo.png' %}" type="image/x-icon">


    <!-- Importando jquery validation -->
    <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/dist/jquery.validate.js" ></script>
    <!-- Importando SweetAlert -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Importando archivos js de bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Importar css de bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Importando iconos de font awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- importando datatables-->
    <link rel="stylesheet" href="//cdn.datatables.net/2.3.1/css/dataTables.dataTables.min.css">
    <script src="//cdn.datatables.net/2.3.1/js/dataTables.min.js"></script>

    <!-- Botones de exportaci√≥n (versi√≥n compatible) -->
    <script src="https://cdn.datatables.net/buttons/2.3.1/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.3.1/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.3.1/js/buttons.print.min.js"></script>
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.3.1/css/buttons.dataTables.min.css">


    <!-- Librer√≠as para exportaci√≥n -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>

    <title>{% block title %}AquAlert{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'pwa/css/main.css' %}">
</head>
<body>



    <style>
    .theme-switch-wrapper {
        position: fixed;
        top: 10px;
        right: 15px;
        z-index: 1000;
        background-color: transparent; /* Puedes cambiarlo si quieres resaltar */
        padding: 6px;
        border-radius: 8px;
    }

        /* Estilo general del switch */
    .switch.theme-switch {
        position: relative;
        display: inline-block;
        width: 60px;
        height: 30px;
    }

    .switch.theme-switch input {
        opacity: 0;
        width: 0;
        height: 0;
    }

    /* Slider visual */
    .switch.theme-switch .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        transition: background-color 0.4s;
        border-radius: 34px;
    }

    /* Toggle circular */
    .switch.theme-switch .slider::before {
        position: absolute;
        content: "";
        height: 24px;
        width: 24px;
        left: 3px;
        bottom: 3px;
        background-color: white;
        transition: transform 0.4s;
        border-radius: 50%;
    }

    /* Estado activado */
    .switch.theme-switch input:checked + .slider {
        background-color: #ededed;
    }

    .switch.theme-switch input:checked + .slider::before {
        transform: translateX(30px);
    }

    /* Iconos opcionales (modo claro/oscuro) */
    .switch.theme-switch .slider::after {
        content: 'üåô';
        position: absolute;
        right: 8px;
        top: 5px;
        font-size: 16px;
        color: #fff;
    }

    .switch.theme-switch input:checked + .slider::after {
        content: '‚òÄÔ∏è';
    }





/* Modo claro */
body.claro {
    background-color: #f5f6fa;
    color: #1E1E2C;
    transition: background-color 0.5s ease, color 0.5s ease;
}

/* Modo oscuro */
body.oscuro {
    background-color: #1E1E2C;
    color: #ffffff;
    transition: background-color 0.5s ease, color 0.5s ease;
}

body.oscuro h1,
body.oscuro p,
body.oscuro a {
    color: #ffffff;
}

body.claro h1,
body.claro p,
body.claro a {
    color: #1E1E2C;
}

body {
    transition: background-color 0.5s ease, color 0.5s ease;
}





/* üåí Modo oscuro - forzar texto oscuro en caja clara */
body.oscuro #contenedorTexto {
    background-color: #1E1E2C !important;
    color: #1E1E2C !important;
    padding: 12px;
    border-radius: 6px;
    box-shadow: 0 2px 4px rgba(255,255,255,0.05);
}

body.oscuro #contenedorTexto strong,
body.oscuro #contenedorTexto b,
body.oscuro #contenedorTexto small,
body.oscuro #contenedorTexto p {
    color: #1E1E2C !important;
}


/* üîí En modo oscuro, mantener estilo claro */
body.oscuro .tituloNotificaciones {
    background-color: #f8f9fa !important;
    color: #1E1E2C !important;
    padding: 10px 16px;
    border-radius: 6px;
    font-weight: 500;
    box-shadow: 0 2px 4px rgba(255, 255, 255, 0.05);
    transition: background-color 0.4s ease, color 0.4s ease;
}

/* üîÜ En modo claro, estilizado tradicional */
body.claro .tituloNotificaciones {
    background-color: #ffffff !important;
    color: #1E1E2C !important;
    padding: 10px 16px;
    border-radius: 6px;
    font-weight: 500;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}





/* üîÜ Claro */
body.claro .tituloGrafico,
body.claro .textoGrafico {
    color: #34495e !important;
}

body.claro .textoMulta {
    color: #c0392b !important;
    font-weight: bold;
}

/* üåí Oscuro */
body.oscuro .tituloGrafico,
body.oscuro .textoGrafico {
    color: #ecf0f1 !important;
}

body.oscuro .textoMulta {
    color: #ff6b6b !important;
    font-weight: bold;
}




    </style>
    <header>
        <h1 class="tituloCentral titleFade">AquAlert üíß {% block seccion %}{% endblock %}</h1>
            <div class="theme-switch-wrapper">
                <label class="switch theme-switch">
                    <input type="checkbox" class="bsc" checked>
                    <span class="slider"></span>
                </label>
            </div>
    </header>
    <main class="fade">


            <div class="contenedorMain">    
                
                
                {% block content %}

                {% endblock %}
            </div>

    </main>

    <script>
        if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register("{% static 'pwa/js/serviceworker.js' %}")
            .then(reg => console.log("‚úÖ SW registrado:", reg))
            .catch(err => console.error("‚ùå Error al registrar SW", err));
        }

    </script>



    {% if messages %}
    {% for message in messages %}
        <script>
        Swal.fire({

            title: "{% if message.tags == 'error' %}¬°ERROR!{% else %}¬°√âXITO!{% endif %}",
            
            text: "{{ message }}",

            icon: "{% if message.tags == 'error' %}error{% else %}success{% endif %}"

        });
        </script>
    {% endfor %}
    {% endif %}

    <script>
    function confirm() {
        Swal.fire({
            title: "CONFIRMACI√ìN",
            text: "¬øEst√° seguro de cerrar la sesi√≥n?",
            icon: "warning",
            showCancelButton: true,
            confirmButtonColor: "#d33",
            cancelButtonColor: "#3085d6",
            confirmButtonText: "S√≠, cerrar",
            cancelButtonText: "Cancelar"
        }).then((result) => {
            if (result.isConfirmed) {
                window.location.href = "{% url 'cerrar_sesion' %}";
            }
        });
    }
    </script>


<script>
    document.addEventListener("DOMContentLoaded", function () {
        const toggle = document.querySelector('.bsc');
        const body = document.body;

        // Activar modo por defecto
        body.classList.add('oscuro');

        toggle.addEventListener('change', function () {
            setTimeout(() => {
                if (this.checked) {
                    body.classList.remove('claro');
                    body.classList.add('oscuro');
                } else {
                    body.classList.remove('oscuro');
                    body.classList.add('claro');
                }
            }, 500); // medio segundo para transici√≥n suave
        });
    });
</script>


</body>
</html>

